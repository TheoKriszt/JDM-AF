<div class="container">

  <form #searchForm="ngForm" (ngSubmit)="searchForm.valid && submitWordSearch()">
    <div class="row">
      <mat-form-field class="col-md-3 col-xs-4" appearance="outline" color="primary" >
        <mat-label>Recherchez un mot</mat-label>
        <input type="text" placeholder="Ex: Chat" aria-label="Word" matInput [formControl]="nameControl" [matAutocomplete]="wordAuto" required>
        <mat-error *ngIf="searchForm.submitted && searchForm.valid"> Champ Manquant !</mat-error>
        <mat-autocomplete #wordAuto="matAutocomplete">
          <mat-option *ngFor="let option of filteredOptions | async" [value]="option">
            {{option}}
          </mat-option>
        </mat-autocomplete>
      </mat-form-field>

      <div class="col-md-6 col-xs-8">
        <div class="d-flex flex-column">
          <div class="d-flex flex-sm-row">
            <mat-form-field class="example-chip-list">
              <input
                placeholder="Types de relations.. "
                #relationInput
                [formControl]="relationCtrl"
                [matAutocomplete]="relationAuto"
                [matChipInputFor]="chipList"
                [matChipInputSeparatorKeyCodes]="separatorKeysCodes"
                [matChipInputAddOnBlur]="addOnBlur"
                (matChipInputTokenEnd)="add($event)">

              <mat-chip-list #chipList>
                <mat-chip
                  *ngFor="let relation of relations"
                  [selectable]="selectable"
                  [removable]="removable"
                  (removed)="remove(relation)">
                  {{relation}}
                  <mat-icon matChipRemove svgIcon="cancel" *ngIf="removable">cancel</mat-icon>
                </mat-chip>
              </mat-chip-list>

              <mat-autocomplete #relationAuto="matAutocomplete" (optionSelected)="selected($event)">
                <mat-option *ngFor="let relation of filteredRelations" [value]="relation">
                  {{relation}}
                </mat-option>
              </mat-autocomplete>
            </mat-form-field>
          </div>
          <div class="d-flex justify-content-center">
            <mat-button-toggle-group multiple="true"  #relationsTypesgroup="matButtonToggleGroup">
              <mat-button-toggle value="rIn" (change)="rIn = $event.source.checked">
                Relations Entrantes
              </mat-button-toggle>
              <mat-button-toggle value="rOut" (change)="rOut = $event.source.checked">
                Relations sortantes
              </mat-button-toggle>
            </mat-button-toggle-group>

            {{relationsTypesgroup.value}}
          </div>
        </div>
      </div>

      <div class="form-group col-md-3 d-flex justify-content-center">
        <button mat-raised-button color="warn" [disabled]="loading" class="btn btn-primary">Recherche</button>
        <div *ngIf="loading">
          <mat-spinner color="warn"></mat-spinner>
        </div>
      </div>
    </div>
  </form>

  <div class="spacer"></div>
  <mat-divider></mat-divider>
  <div class="spacer"></div>

  <div class="row">
    <div class="col-xs-12">
      <router-outlet></router-outlet>
    </div>
  </div>
</div>


